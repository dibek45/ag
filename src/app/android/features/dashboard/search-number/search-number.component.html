<div class="search-container">
  <input
    type="text"
    placeholder="Buscar por telÃ©fono"
    [(ngModel)]="telefono"
    (ngModelChange)="buscarPorTelefono()"
  />
  <span class="clear-btn" *ngIf="telefono" (click)="limpiarTelefono()">âœ•</span>
</div>

<!-- Lista de compradores Ãºnicos -->
<div class="resultados" *ngIf="telefono.trim().length > 0 && resultados.length > 0">
  <div
    class="item"
    *ngFor="let resultado of resultados"
    (click)="seleccionarPorComprador(resultado.comprador)"
  >
    <!-- Si vino por nÃºmero de boleto -->
    <div class="info" *ngIf="resultado.tipo === 'boleto'">
      <strong>ðŸŽ« Boleto #{{ resultado.numero }}</strong>
      <small>{{ resultado.comprador?.nombre || 'Sin nombre' }}</small>
    </div>

    <!-- Si vino por bÃºsqueda de telÃ©fono -->
    <div class="info" *ngIf="resultado.tipo === 'telefono'">
      <strong>{{ resultado.comprador?.nombre || 'Sin nombre' }}</strong>
      <small>{{ resultado.comprador?.telefono }}</small>
    </div>

    <!-- Badge que cambia entre cantidad y lista de boletos -->
    <span
      class="badge"
      *ngIf="resultado.tipo === 'telefono'"
      (click)="mostrarBoletos(resultado, $event)"
    >
      {{ resultado.mostrandoBoletos
        ? (resultado.listaBoletos?.join(', ') || '')
        : resultado.cantidad + ' boletos' }}
    </span>
  </div>
</div>
