<table class="agenda-grid">
  <tr>
    <!-- Columna izquierda: horas -->
    <td class="hours">
      <div *ngFor="let h of hourLabels" class="hour-label">
        {{ h }}
      </div>
    </td>

    <!-- Columna derecha: citas -->
    <td class="slots" [style.height]="slotsHeight">
      <!-- lÃ­neas horizontales -->
      <div 
  *ngFor="let h of hourLabels" 
  class="hour-line" 
  (click)="abrirModal(h)">
</div>

      <!-- citas ya existentes -->
      <div
        *ngFor="let cita of citasDelDia"
        class="cita"
        [style.top.px]="getTop(cita.hora)"
        [style.height.px]="getHeight(cita.servicio?.duracionMin || 60)"
      >
        <div class="appointment">
          <strong>{{ cita.nombreCliente }}</strong>
          <div class="duration">
            {{ cita.servicio?.duracionMin }} min
            de {{ (cita.fecha + 'T' + cita.hora) | date:'shortTime' }}
            a {{ getHoraFin(cita.hora, cita.servicio?.duracionMin || 60, cita.fecha) }}
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

<app-cita-modal
  *ngIf="showModal"
  [fechaSeleccionada]="{ fecha: slotSeleccionado?.fecha || currentDate, hora: slotSeleccionado?.hora }"
  [servicios]="serviciosDisponibles"
  [citasOcupadas]="citasOcupadasParaModal"
  (closeModal)="cerrarModal()"
  (saveModal)="guardarCita($event)">
</app-cita-modal>

