<div class="selector-container">
  <div class="header">
    <button (click)="anterior()" class="nav-btn">â€¹</button>
    <h3>Elegir nueva cita</h3>
    <button (click)="siguiente()" class="nav-btn">â€º</button>
  </div>

  <!-- Selector de servicio -->
  <app-servicio-selector
    [servicios]="evento?.servicios || []"
    [servicioSeleccionado]="servicioSeleccionado"
    (servicioChange)="seleccionarServicio($event)">
  </app-servicio-selector>

  <!-- ðŸ”¹ Mostrar mensaje si no se ha seleccionado servicio -->
  <div *ngIf="!servicioSeleccionado" class="no-servicio-global">
    <p>Primero selecciona un servicio para ver las citas disponibles.</p>
  </div>

  <!-- ðŸ”¹ DÃ­as y horarios solo si hay servicio -->
  <div class="dias-grid" *ngIf="servicioSeleccionado">
    <div class="dia" *ngFor="let d of diasVisibles">
      <div class="dia-card">
        <h4>{{ citaService.getEtiquetaDia(d) }}</h4>
        <p class="fecha">{{ d | date: 'yyyy-MM-dd' }}</p>

        <div class="horas">
          <button
            *ngFor="let h of horasDisponibles[d.toISOString().substring(0, 10)]"
            [disabled]="h.ocupada"
            [class.ocupado]="h.ocupada"
            (click)="!h.ocupada && reservar(d, h.label)">
            {{ h.label }}
          </button>
        </div>
      </div>
    </div>
  </div>

  </div>

<!-- ðŸ”¹ Modal de confirmaciÃ³n -->
<app-confirmar-cita-modal
  *ngIf="mostrarConfirmacion"
  [servicio]="servicioSeleccionado"
  [horaInicio]="horaSeleccionada"
  [horaFin]="horaFin"
  (confirmarCita)="confirmarCita()"
  (cancelarCita)="cancelarCita()">
</app-confirmar-cita-modal>
